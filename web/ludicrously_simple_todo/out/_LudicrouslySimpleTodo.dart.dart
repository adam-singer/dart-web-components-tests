// Auto-generated from LudicrouslySimpleTodo.html.
// DO NOT EDIT.

library LudicrouslySimpleTodo_html;

import 'dart:html' as autogenerated;
import 'package:web_components/watcher.dart' as autogenerated;

import '../models.dart';

import 'dart:html';


// Original code
List<TodoItem> todoItems = new List<TodoItem>();

createNewTodo(e) {
  var newTodo = query('#new-todo') as InputElement;
  todoItems.add(new TodoItem(newTodo.value));
  newTodo.value = '';
}

main() { }


// Additional generated code

autogenerated.InputElement _newTodo;

autogenerated.ButtonElement __e0;

autogenerated.EventListener _listener__e0_click_1;

autogenerated.UListElement _todos;

autogenerated.UnknownElement __e3;

// Fields for template list 'todo in todoItems'
autogenerated.WatcherDisposer _stopWatcher__e2;
List<autogenerated.WatcherDisposer> _removeChild__e2 = [];


/** Create the views and bind them to models. */
void init_autogenerated() {
  // Create view.
  var _root = new autogenerated.DocumentFragment.html(_INITIAL_PAGE);

  // Initialize fields.
  _newTodo = _root.query('#new-todo');
  
  __e0 = _root.query('#__e-0');
  
  _todos = _root.query('#todos');
  
  __e3 = _todos.query('#__e-3');
  

  // Attach model to views.
  _listener__e0_click_1 = (e) {
    createNewTodo(e);
    autogenerated.dispatch();
  };
  __e0.on.click.add(_listener__e0_click_1);
  
  _stopWatcher__e2 = autogenerated.watchAndInvoke(() => todoItems, (e) {
    for (var remover in _removeChild__e2) remover();
    _removeChild__e2.clear();
    
    var _insert__e2 = __e3.nextNode;
    
    for (var todo in todoItems) {
      
      autogenerated.LIElement __e2;
      autogenerated.UnknownElement __e1;
      
      __e2 = new autogenerated.Element.html('''
      <li><x-todo-item id="__e-1"></x-todo-item></li>''');
      __e1 = __e2.query('#__e-1');
      
      __e3.parent.insertBefore(__e2, _insert__e2);
      
      // Attach listeners/watchers
      
      // Remember to unregister them
      
      _removeChild__e2.add(() {
        
        __e2.remove();
        
        __e2 = null;
        __e1 = null;
        
      });
    }
  });
  


  // Attach view to the document.
  autogenerated.document.body.nodes.add(_root);
  _root = autogenerated.document.body;
}

final String _INITIAL_PAGE = '''

    <h1>LudicrouslySimpleTodo</h1>
    
    <input type="text" id="new-todo">
    <button id="__e-0">Create New Todo</button>
    
    <ul id="todos">
      <template id="__e-3" style="display:none"></template>
    </ul>

    
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  

''';
