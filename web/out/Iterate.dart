// Auto-generated from Iterate.html.
// DO NOT EDIT.

library Iterate_html;

import 'dart:html' as autogenerated;
import 'package:web_components/web_components.dart' as autogenerated;

import 'dart:html';


// Original code
List<String> features = const <String>['lexical scope',
                                        'closures',
                                        'getters and setters',
                                        'isolates',
                                        'top-level functions',
                                        'optional static types',
                                        'one-line functions',
                                        'familiar syntax',
                                        'map and list literals',
                                        'generics'];

// TODO try a Set when it can be watched
List<String> userFavorites = new List<String>();

addToFavorites(Event e) {
  InputElement checkbox = e.target;
  var fav = checkbox.value;
  
  if (checkbox.checked) {
    userFavorites.add(fav);
  } else if (!checkbox.checked) {
    var index = userFavorites.indexOf(fav);
    userFavorites.removeAt(index);
  }
  
  userFavorites.sort();
}

main() { }

// Additional generated code
/** Create the views and bind them to models. */
void init_autogenerated() {
  var _root = autogenerated.document.body;
  autogenerated.UnknownElement __e4;
  
  List<autogenerated.WatcherDisposer> _stoppers1;
  
  List<Function> _removeChild__e4 = [];
  
  autogenerated.Node _endPosition__e4;
  
  autogenerated.UnknownElement __e8;
  
  List<Function> _removeChild__e8 = [];
  
  autogenerated.Node _endPosition__e8;
  


  // Initialize fields.
  __e4 = _root.query('#__e-4');
  _stoppers1 = [];
  __e8 = _root.query('#__e-8');
  

  // Attach model to views.
  _endPosition__e4 = __e4;
  
  _stoppers1.add(autogenerated.watchAndInvoke(() => features, (_) {
    for (var remover in _removeChild__e4) remover();
    _removeChild__e4.clear();
    
    _endPosition__e4 = autogenerated.removeNodes(__e4, _endPosition__e4);
    
    var __insert___e4 = __e4.nextNode;
    
    for (var feature in features) {
      
      autogenerated.LIElement __e3;
      autogenerated.InputElement __e0;
      autogenerated.EventListener _listener__e0_click_2_1;
      List<autogenerated.WatcherDisposer> _stoppers3_2;
      autogenerated.SpanElement __e2;
      var _binding1;
      
      __e3 = new autogenerated.Element.html('<li>\n          <label>\n            <input type="checkbox" id="__e-0">\n            <span id="__e-2"></span>\n          </label>\n        </li>');
      __e0 = __e3.query('#__e-0');
      _stoppers3_2 = [];
      __e2 = __e3.query('#__e-2');
      _binding1 = autogenerated.nodeForBinding( feature );
      __e2.nodes.add(_binding1);
      
      autogenerated.insertAllBefore(__e4.parent, __insert___e4,
      
      [_endPosition__e4 = __e3]);
      
      _listener__e0_click_2_1 = ($event) {
        addToFavorites($event);
        autogenerated.dispatch();
      };
      __e0.on.click.add(_listener__e0_click_2_1);
      
      _stoppers3_2.add(autogenerated.watchAndInvoke(() =>  feature , (__e) { __e0.value = __e.newValue; }));
      _stoppers3_2.add(autogenerated.watchAndInvoke(() =>  feature , (__e) { _binding1 = autogenerated.updateBinding(__e.newValue, _binding1); }));
      
      _removeChild__e4.add(() {
        
        __e3 = null;
        (_stoppers3_2..forEach((s) => s())).clear();
        __e0.on.click.remove(_listener__e0_click_2_1);
        _listener__e0_click_2_1 = null;
        
        __e0 = null;
        __e2 = null;
        _binding1 = null;
        
      });
    }
  }));
  
  _endPosition__e8 = __e8;
  
  _stoppers1.add(autogenerated.watchAndInvoke(() => userFavorites, (_) {
    for (var remover in _removeChild__e8) remover();
    _removeChild__e8.clear();
    
    _endPosition__e8 = autogenerated.removeNodes(__e8, _endPosition__e8);
    
    var __insert___e8 = __e8.nextNode;
    
    for (var fav in userFavorites) {
      
      autogenerated.LIElement __e7;
      autogenerated.SpanElement __e6;
      var _binding5;
      List<autogenerated.WatcherDisposer> _stoppers4_1;
      
      __e7 = new autogenerated.Element.html('<li><span id="__e-6"></span></li>');
      __e6 = __e7.query('#__e-6');
      _binding5 = autogenerated.nodeForBinding( fav );
      _stoppers4_1 = [];
      __e6.nodes.add(_binding5);
      
      autogenerated.insertAllBefore(__e8.parent, __insert___e8,
      
      [_endPosition__e8 = __e7]);
      
      _stoppers4_1.add(autogenerated.watchAndInvoke(() =>  fav , (__e) { _binding5 = autogenerated.updateBinding(__e.newValue, _binding5); }));
      
      _removeChild__e8.add(() {
        
        __e7 = null;
        __e6 = null;
        (_stoppers4_1..forEach((s) => s())).clear();
        _binding5 = null;
        
      });
    }
  }));
  

}
